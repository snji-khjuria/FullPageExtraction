(function(k){var n=window.AmazonUIPageJS||window.P,t=n._namespace||n.attributeErrors,b=t?t("CustomerReviewsGalleryAssets"):n;b.guardFatal?b.guardFatal(k)(b,window):b.execute(function(){k(b,window)})})(function(k,n,t){k.when("A","load").register("review-image-asset-loader",function(b){var a=!1;b.ajax("/gp/customer-reviews/aj/private/reviewsGallery/get-image-gallery-assets",{method:"post",success:function(b){k.load.css(b.reviewsLightboxCSS);var d=document.createElement("script");d.type="text/javascript";
d.async=!0;d.setAttribute("crossorigin","anonymous");d.src=b.reviewsLightboxJS;document.getElementsByTagName("head")[0].appendChild(d);a=!0;k.register("review-image-assets-loaded",{})},error:function(){var a;a="/gp/customer-reviews/aj/metrics/log-values?noCache="+(new Date).getTime();a+="&SimpleStack:ReviewImageAssetLoaderFailure=1";n.Image&&((new Image).src=a)}});return{isLoaded:function(){return a}}});k.when("A","jQuery","cr-log-utils","review-image-assets-loaded").register("review-image-binder",
function(b,a,c){function d(b,d,e,h,m){if(!(b&&d&&e instanceof a&&h instanceof a&&m instanceof a))return c.logError("Invalid parameters for imageBinder.initializeEventHandlers with ASIN: "+b+", galleryName: "+d+", $popoverTrigger: "+e+", $thumbnails: "+h+", $galleryLink: "+m,"FATAL"),!1;var n="reviewsLightbox-ready-"+d;h.click(function(){f(b,d);var c=h.index(this);e.click();k.when(n).execute(function(){a("#"+d).trigger("jumpToImageAtIndex",c)})});m.click(function(){f(b,d);e.click();k.when(n).execute(function(){a("#"+
d).trigger("hideImmersiveView")})});return!0}function f(a,b){if(!a||!b)return c.logError("Invalid parameters for imageBinder.initializeImageGallery with ASIN: "+a+", galleryName: "+b,"FATAL"),!1;if(h)return!0;(new ReviewsLightbox(b,"DESKTOP")).initializeForAsin(a);return h=!0}var h=!1,e={};k.when("reviewsLightbox-js").execute(function(){var b=a("#reviews-image-gallery-container"),c=b.attr("data-asin");0<b.length&&c&&d(c,"reviews-image-gallery",b.find(".a-popover-trigger"),b.find(".review-image-tile"),
b.find("#reviews-image-gallery-link"))});return{bindReview:function(b,c,d){var f=new ReviewGallery(d,"DESKTOP"),h=a("#"+c);h.find(".review-image-tile").each(function(c){a(this).click(function(){e[b]||(f.initializeForReview(b),e[b]=!0);h.find(".a-popover-trigger").click();k.when("reviewsLightbox-ready-"+d).execute(function(){f.render();f.showImageAtIndex(c)})})})},initializeImageGallery:f,initializeEventHandlers:d}});k.when("A","jQuery","cr-video-model","cr-video-view","reviews-constants").register("cr-video-controller",
function(b,a,c,d,f){function h(){b.each(a(".review-views .review"),function(a,b){if(a&&a.id){var f=c.getEmbedInfo(a.id);f&&d.embedVideo(f)}})}b.on(f.events.RELOAD_COMPLETE,function(){h()});h();return{initAll:h}});k.when("jQuery").register("cr-video-model",function(b){return{getEmbedInfo:function(a){var c="video-block-"+a,d=b("#"+a+" .video-url").val(),f=b("#"+a+" .video-slate-img-url").val(),h=b("#cr-video-swf-url").val();return a&&d&&h?{videoDomId:c,videoUrl:d,videoSlateImgUrl:f,videoSwfUrl:h}:
!1}}});k.when("jQuery","afterLoad").register("cr-video-view",function(b){k.now("Airy").execute(function(a){var c=b("#cr-airy-js-source-url").val(),d=b("#cr-airy-css-source-url").val();a||"string"!==typeof c||"string"!==typeof d||(k.load.js(c),k.load.css(d))});return{embedVideo:function(a){k.when("Airy").execute(function(b){b.embed({parentId:a.videoDomId,streamingUrls:[a.videoUrl],slateImages:{preloadSlate:a.videoSlateImgUrl},swfUrl:a.videoSwfUrl,desiredMode:"html"})})}}})});