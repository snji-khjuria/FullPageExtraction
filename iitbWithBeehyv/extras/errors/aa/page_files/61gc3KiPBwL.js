(function(m){var b=window.AmazonUIPageJS||window.P,u=b._namespace||b.attributeErrors,k=u?u("AmazonDevicesDetailPageLegacyAssets"):b;k.guardFatal?k.guardFatal(m)(k,window):k.execute(function(){m(k,window)})})(function(m,b,u){b.KDS||(b.KDS={common:{},util:{}});b.KDS.common||(b.KDS.common={});b.KDS.util||(b.KDS.util={});m.when("A").register("kindleDeviceCommonJS",function(k){var a=k.$;b.KDS.util.SmoothScroll={run:function(c,d,e){c.length&&a(document.body).animate({scrollTop:c.offset().top},400,function(){d&&
(location.hash="#"+d);e&&b.KDS.ajax.RefTag.send(e)})}}});m.when("A").execute(function(b){var a=b.$;a("#bxgy_seller_exposed").click(function(){bundle_toggle_seller_info();return!1}).show();bundle_toggle_seller_info=function(){var c=a("ul.bxgyInfoBlock");c.is(":hidden")?(c.show(200,function(){loadAvailability()}),a("#bxgy_seller_exposed").text(bundle_hideDetailsStr)):(c.hide(200),a("#bxgy_seller_exposed").text(bundle_showDetailsStr))};loadAvailability=function(){var c=[];a("#bxgySellerInfoBlock p.bxgySellerLoading").each(function(){var d=
a(this).attr("id"),e=d.substring(0,d.length-10),b=e.indexOf("-"),d=e.substring(0,b),e=e.substring(b+1);c.push({asin:d,merchant:e})});if(0<c.length){for(var d="/gp/fbt-ajax/shipping/shipping-handler.html/ref=pd_bxgy_ship?id=",e=0;e<c.length;e++)0!=e&&(d+=","),d+=c[e].asin+":"+c[e].merchant;a.ajax({url:d+"&refTag=pd_bxgy_shipping",dataType:"json",cache:!1,error:function(d,e,b){for(d=0;d<c.length;d++)a("#"+c[d].asin+"-"+c[d].merchant+"sellerInfo").remove(),a("#"+c[d].asin+"-"+c[d].merchant+"sellerInfoError").show()},
success:function(d,e){for(var b=0;b<c.length;b++)a("#"+c[b].asin+"-"+c[b].merchant+"sellerInfo").replaceWith(d["bxgy"+c[b].asin])}})}}});m.when("A").register("kindleBBPopover",function(k){var a=k.$,c={registeredImages:{},registerImage:function(a,e){c.registeredImages[a]={image:e};(new Image).src=e},displayImage:function(d,e,b,g){b==u&&(b=!1);g==u&&(g=!1);var l="",h="";1==b&&(l="bndl");1==g&&(h="aui");b=c.registeredImages[e];d=a("#bb_extra_prodImage_"+l+h+d+" img").get(0);b&&d&&b.image!=d.src&&(d.src=
b.image,e=a("#"+e),0!=e.length&&(a(e).siblings().css("border","1px solid #999999"),a(e).css("border","1px solid #990000")))},refTag:{},asinCache:{},selectedAsin:{},displayedAsin:{},originalAsin:{},variationInfo:{},titleVariation:{},unloadedDynamicPopovers:{},swatchHoverOver:function(d,e){b.clearTimeout(c.hoverOutTimer);a(d).children("div").each(function(c,d){"swatchSelect"!=a(d).attr("class")&&a(d).removeClass("swatchAvailable").addClass("swatchHover")});var f=a(d).attr("id"),f=f.substr(0,f.indexOf("_"));
c.updatePopoverDisplay(e,f)},swatchHoverOut:function(d,e){a(d).children("div").each(function(c,d){"swatchSelect"!=a(d).attr("class")&&a(d).removeClass("swatchHover").addClass("swatchAvailable")});c.hoverOutTimer=b.setTimeout(function(){c.updatePopoverDisplay(e,c.selectedAsin[e]);a("#bb_extra_feature_"+e+"_title").html(c.titleVariation[e][c.selectedAsin[e]].titleURL)},100)},swatchClick:function(d,b){var f=a(d).attr("id"),f=f.substr(0,f.indexOf("_"));a(d).parent().find(".swatchSelect").each(function(c,
d){a(d).removeClass("swatchSelect").addClass("swatchAvailable");a(d).find(".selectedArrow").css("display","none")});a(d).children("div").removeClass("swatchAvailable").removeClass("swatchHover").addClass("swatchSelect").find(".selectedArrow").css("display","block");c.selectedAsin[b]=f;a("#bb_extra_feature_"+b+"_title").html(c.titleVariation[b][f].titleURL);null!=c.asinCache[f]&&null!=c.asinCache[f]["data/offer"]&&c.updateBuyBox(b)},updatePopoverDisplay:function(d,b){if(b!=c.displayedAsin[d]){c.displayedAsin[d]=
b;null!=c.asinCache[b]&&null!=c.asinCache[b]["data/offer"]||a("#bb_extra_feature_"+d+"_addToOrder").css("opacity","0.4").css("filter","alpha(opacity=40)").find("a").attr("href","javascript:void(0)");for(var f in c.variationInfo[d])if(f==b){var g,l,h;for(h in c.variationInfo[d][f])g=h,l=c.variationInfo[d][f][h],a("#"+d+"_selected_"+g+" .variationLabel").text(l);null==c.asinCache[b]?(a.ajax({cache:!1,data:{asin:b,sId:c.sessionId,baseRef:c.refTag[c.originalAsin[d]]},dataType:"json",success:function(a,
f){if(a&&0==a.error){for(var g in a)"error"!=g&&(c.asinCache[g]=a[g]);b==c.displayedAsin[d]&&c.doUpdate(d,b)}else c.asinCache[b]=null},type:"GET",url:"/gp/digital/fiona/ajax/buyBoxTwister/ref="+c.refTag[c.originalAsin[d]]+"_bbpvh"}),c.asinCache[b]="Loading"):"Loading"!=c.asinCache[b]&&c.doUpdate(d,b);break}}},doUpdate:function(d,b,f){for(var g in c.asinCache[b])if(f||"variations"!=g)"data/bundleProductImages"==g?c.placeBundleProductImages(c.asinCache[b][g]):"data/bundleAltImages"==g?c.placeBundleAltImages(c.asinCache[b][g]):
a("#bb_extra_feature_"+d+"_"+g).html(c.asinCache[b][g]);c.updateBuyBox(d);a("#bb_extra_feature_"+d+"_addToOrder").css("opacity","1.0").css("filter","alpha(opacity=100)").find("a").attr("href",'javascript:BBPopover.addToOrder("'+d+'")');c.doUpdateCallback&&"function"==typeof c.doUpdateCallback&&c.doUpdateCallback()},show:function(a){c.unloadedDynamicPopovers[a]&&(c.unloadedDynamicPopovers[a](),c.unloadedDynamicPopovers[a]=null)},registerDynamicPopover:function(a,b){c.unloadedDynamicPopovers[a]=b},
addToOrder:function(d){var b=a("#bb_extra_"+c.originalAsin[d]).parents(".ap_popover");0<b.length&&b.find(".ap_close").trigger("click");b=a("#bb_extra_"+c.originalAsin[d]).parents(".a-popover-wrapper");0<b.length&&b.find("button.a-button-close").trigger("click");b=a("#bb_extra_bndl"+c.originalAsin[d]);0<b.length&&b.parents(".ap_popover").find(".ap_close").trigger("click");b=a("#bb_chk_"+c.originalAsin[d]+"_offerId");b.attr("checked")||b.trigger("click");c.checkboxChecked(1,c.refTag[c.originalAsin[d]]+
"p")},updateBuyBox:function(d){var b=c.selectedAsin[d],f;if(c.variationInfo[d]){for(var g in c.variationInfo[d][b])f=c.variationInfo[d][b][g];a("#bb_lm_"+c.originalAsin[d]+"_var").text(f);a("#bb_chk_"+c.originalAsin[d]+"_var").val(f)}f=a("#bb_lm_"+c.originalAsin[d]+"_price");0<f.length&&(g="",0<f.children("del").eq(0).length&&(g="<del><span class='a-color-secondary a-text-strike'>"+c.asinCache[b]["data/offer"].listPrice+"</span></del>&nbsp"),g+=c.asinCache[b]["data/offer"].buyingPrice,f.html(g));
f=c.asinCache[b]["data/offer"].offerId;a("#bb_chk_"+c.originalAsin[d]+"_offerId").attr("value",f);a("#bb_chk_"+c.originalAsin[d]+"_asin").val(b)},checkboxChecked:function(c,b){var f;f="/gp/digital/fiona/ajax/log.html/ref="+b+(c?"_chk":"_uchk");a.post(f)},giftStatusChanged:function(c){var b=a("#bb_chk_ku_replacement_item"),f=b.siblings("input[name^='asin']"),g=b.siblings("input[name^='offeringID']");b.length&&c!==u&&(c?(f.val(b[0].dataset.replacementAsin),g.val(b[0].dataset.replacementOfferingId)):
(f.val(b[0].dataset.originalAsin),g.val(b[0].dataset.originalOfferingId)))},placeBundleProductImages:function(c){for(var b in c)a("#bb_extra_feature_bndl"+b+"_productImage").html(c[b])},placeBundleAltImages:function(c){var b=c.altImages,f=null,g;for(g in b)f=a("#bb_extra_feature_bndl"+g+"_altImages"),f.html(b[g]);null!=f&&a(f).append(c.javascript)}};b.BBPopover=c});m.when("A").register("kindleBuyboxWarrantyJS",function(k){var a=k.$;"undefined"==typeof b.KDS&&(b.KDS={});"undefined"==typeof b.KDS.buybox&&
(b.KDS.buybox={});b.KDS.buybox.twisterInit=function(){b.KDS.buybox.warrantyMap=[];b.KDS.buybox.previousID=a("#kbbExtraItemsBottom .kwar:visible").attr("id");DetailPageFramework.registerCallback("asin_select","kindle-buy-box-messaging",function(c){a("#kbbExtraItemsBottom .kwar").hide();c=a("#kbbExtraItemsBottom ."+c.current_asin).attr("id");a("#"+c).show();"undefined"!=typeof c&&c!=b.KDS.buybox.previousID?("undefined"!=typeof b.KDS.buybox.previousID&&(b.KDS.buybox.warrantyMap[b.KDS.buybox.previousID]=
a("#"+b.KDS.buybox.previousID+" td input").attr("checked"),a("#"+b.KDS.buybox.previousID+" td input:checkbox").attr("checked",!1)),b.KDS.buybox.warrantyMap[c]?a("#"+c+" td input:checkbox").click():b.KDS.buybox.warrantyMap[c]=!1,b.KDS.buybox.previousID=c):"undefined"!=typeof b.KDS.buybox.previousID&&"undefined"==typeof c&&(b.KDS.buybox.warrantyMap[b.KDS.buybox.previousID]=a("#"+b.KDS.buybox.previousID+" td input").attr("checked"),a("#"+b.KDS.buybox.previousID+" td input:checkbox").attr("checked",!1),
b.KDS.buybox.previousID=c)})}});m.when("A","legacy-popover").execute(function(b){var a=b.$;a(".kindle-auto-popover").each(function(){var c=a(this),b=c.children(".kap-localContent").attr("title");if(!b)throw Error("no localContent Id  has provided.");var e=c.children(".kap-popoverDelay").attr("title"),e=parseInt(e,10),f=c.children(".kap-width").attr("title"),f=parseInt(f,10)||0,g=c.children(".kap-trigger").attr("title"),l={localContent:"#"+b,showCloseButton:"true"==c.children(".kap-showCloseButton").attr("title"),
width:f,location:c.children(".kap-location").attr("title")||"centered",closeText:c.children(".kap-closeText").attr("title")||"Close",title:c.children(".kap-title").attr("title")||null,closeEventInclude:c.children(".kap-closeEventInclude").attr("title")||"CLICK_OUTSIDE",modal:"true"==c.children(".kap-modal").attr("title")};0<=e?setTimeout(function(){a.AmazonPopover.displayPopover(l)},e):g&&a(g).amazonPopoverTrigger(l)})});b.KDS||(b.KDS={common:{},util:{}});m.when("A","Airy").register("kindleDeviceJS",
function(k){k=k.$;var a=document.getElementById("kds-popover-mask");a||(a=document.createElement("div"),a.id="kds-popover-mask",a.style.position="absolute",a.style.zIndex="9000",a.style.backgroundColor="#000",a.style.display="none",a.style.width="100%",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.opacity="0.7",a.style.filter="alpha(opacity=70)",document.body.insertBefore(a,document.body.firstChild));var c=document.getElementById("kds-popover");c||(c=document.createElement("div"),
c.id="kds-popover",c.style.position="absolute",c.style.width="960px",c.style.zIndex="9999",c.style.top="-9999px",c.style.margin="0% 50%",document.body.insertBefore(c,a));var d=document.getElementById("airy-container");d||(d=document.createElement("div"),d.id="airy-container",c.appendChild(d));b.KDS.MediaModal=function(a){function f(f){n=!1;p=f.height;v=f.margin;q=f.minWidth;A=f.strings;x=!0;k=f.airyConfig;c.style.height=p;d.style.height=p;a(document).keyup(function(a){27==a.keyCode&&g()});a(b).resize(l);
a("#kds-popover-mask").click(g);b.KDS.MediaModal.airyInstance||(k.streamingUrls=B,k.isShowFirstFrameWhenReadyEnabled=!0,k.bindings={videounsupported:function(){x=!1}},b.KDS.MediaModal.airyInstance=Airy.embed(k),n=!0,null!=y&&h(y,!0))}function g(){b.KDS.MediaModal.airyInstance.pause();a("#kds-popover-mask").hide();a("#kds-popover").css({top:"-9999px"})}function l(){var c=a(document).height(),d=a(document).width(),f=a(b).width(),f=f-2*v>q?f-2*v:q,g=f/-2;a(b).width()<=q&&(g+=(q-a(b).width())/2);a("#kds-popover").css({width:f+
"px",left:g+"px"});a("#airy-container").css({width:f+"px"});a("#kds-popover-mask").css({width:d,height:c})}function h(c,d){if(!x)alert(A["kds-mediapopover-videounsupported"]),g();else if(n){var f=a(b).height(),q=a(document).scrollTop();a("#kds-popover").css({top:f/2-parseFloat(a("#airy-container").css("height").replace("px",""))/2+q});l();a("#kds-popover-mask").show();r!=c&&(r=c,b.KDS.MediaModal.airyInstance.loadMedia({mediaSourceInfo:c}));b.KDS.MediaModal.airyInstance.play({isAsync:d})}}var k,n,
r,p,v,q,y,B=[],x,A;return{createVideoPopover:function(c){for(t in c.triggers){var b=c.triggers[t];a(b.selector).attr("data-videoUrl",b.videoUrl);B.push(b.videoUrl)}f(c);for(t in c.triggers){b=c.triggers[t];a(".kmp-image-cache").append("<img src='"+b.hoverImage+"' /><img src='"+b.normalImage+"' />");var d=a(b.selector);d.css({cursor:"pointer"}).bind("click",function(c){h(a(this).attr("data-videoUrl"),!1)});if(b.hoverImage||b.hoverImageFunction){var q=d.attr("src");b.normalImage&&(q=b.normalImage);
if(b.hoverImageFunction){var g=b.hoverImageFunction;d.bind("mouseenter",function(){a(this).attr("src",g())})}else d.bind("mouseenter",function(){a(this).attr("src",b.hoverImage)});if(b.normalImageFunction){var l=b.normalImageFunction;d.bind("mouseleave",function(){a(this).attr("src",l())})}else d.bind("mouseleave",function(){a(this).attr("src",q)})}}},playVideo:function(a){h(a,!1)},createPlayWhenReady:function(a){for(var c in a.playWhenReady)b.location.hash.substring(1)==a.playWhenReady[c].hash&&
(y=a.playWhenReady[c].video)},init:f}}(k)});m.when("A").register("kindleTabsJS",function(k){var a=k.$;b.KDS||(b.KDS={});b.KDS.common||(b.KDS.common={});k=function(c){var d=this;this.containerId=c.containerId;this.tabChangeCallback=c.tabChangeCallback;this.leftSpacerMargin=c.leftSpacerMargin;a("#"+this.containerId+" .kindleTab-tab").unbind("click").click(function(c){c.preventDefault();d.updateContent.call(d,a(this))}).mouseover(function(){a(this).addClass("kindleTab-tab-hover")}).unbind("keypress").keypress(function(c){"13"==
c.keyCode&&(c.preventDefault(),d.updateContent.call(d,a(this)))}).mouseout(function(){a(this).removeClass("kindleTab-tab-hover")});a(b).resize(function(){d.resizeRightSpacer.call(d)});this.resizeRightSpacer()};k.prototype.updateContent=function(a){var b=a.attr("id"),e=a.attr("content-id");this.activateTab(b,e);a.find(".cBoxInner").blur();"function"==typeof this.tabChangeCallback&&this.tabChangeCallback.apply(this,[b,e])};k.prototype.activateTab=function(c,b){var e="#"+this.containerId;c="#"+c;b="#"+
b;a(e+" .kindleTab-active-tab").addClass("kindleTab-inactive-tab").removeClass("kindleTab-active-tab").children(".secondary").addClass("primary").removeClass("secondary");a(c).addClass("kindleTab-active-tab").removeClass("kindleTab-inactive-tab").children(".primary").addClass("secondary").removeClass("primary");a(e+" .kindleTab-active-content").addClass("kindleTab-inactive").removeClass("kindleTab-active-content");a(b).addClass("kindleTab-active-content").removeClass("kindleTab-inactive")};k.prototype.resizeRightSpacer=
function(){var c=a("#"+this.containerId+" .kindleTab-right-spacer");c.width(c.parent().parent().parent().parent().parent().width()-this.leftSpacerMargin)};b.KDS.common.Shoveler=k});m.when("A").execute(function(b){var a=b.$;a.fn.ie6ImgPngFix=function(){!a.browser.msie||"Microsoft Internet Explorer"!=navigator.appName||4!=parseInt(navigator.appVersion)||-1==navigator.appVersion.indexOf("MSIE 5.5")&&-1==navigator.appVersion.indexOf("MSIE 6")||a(this).find("img[src$=.png]").each(function(){var c="",b=
"",e=a(this).attr("id")?'id="'+a(this).attr("id")+'" ':"",f=a(this).attr("class")?'class="'+a(this).attr("class")+'" ':"",g=a(this).attr("title")?'title="'+a(this).attr("title")+'" ':"",l=a(this).attr("alt")?'alt="'+a(this).attr("alt")+'" ':"",h=a(this).attr("align")?"float:"+a(this).attr("align")+";":"",k=a(this).parent().attr("href")?"cursor:hand;":"";this.style.border&&(c+="border:"+this.style.border+";",this.style.border="");this.style.padding&&(c+="padding:"+this.style.padding+";",this.style.padding=
"");this.style.margin&&(c+="margin:"+this.style.margin+";",this.style.margin="");var n=this.style.cssText,b=b+("<span "+e+f+g+l)+('style="position:relative;white-space:pre-line;display:inline-block;background:transparent;'+h+k),b=b+("width:"+a(this).width()+"px;height:"+a(this).height()+"px;"),b=b+("filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a(this).attr("src")+"', sizingMethod='scale');"),b=b+(n+'"></span>');""!=c&&(b='<span style="position:relative;display:inline-block;'+c+
k+"width:"+a(this).width()+"px;height:"+a(this).height()+'px;">'+b+"</span>");a(this).hide();a(this).after(b)});return a};a(document).ready(function(){a("#kindle-compare2").ie6ImgPngFix()})});b.ODSE||(b.ODSE={common:{},util:{}});b.ODSE.Popover||(b.ODSE.Popover={});m.when("A","legacy-popover").register("popoverWidgetJS",function(k){var a=k.$,c;c={closeText:"Close",closeEventInclude:"CLICK_OUTSIDE",location:"centered"};b.ODSE.Popover.Create=function(b){var e;b&&b.popoverObject&&(e=b.popoverObject.id,
a.extend(c,b.popoverObject.options),a("#"+e).amazonPopoverTrigger(c))}});m.when("A","legacy-popover").execute(function(b){var a=b.$,c="",c="https://www.att.com/maps/3rdparty/store-locator.html?zip=";b='<iframe id="store-frame" class="show-frame" data-src="'+c+'" src="" ></iframe>';a("#search-att-store").amazonPopoverTrigger({loadingContent:"Please Wait ..",literalContent:b,modal:"true",title:"Store Locator",width:1100,closeEventInclude:"CLICK_OUTSIDE",location:"centered",onShow:function(){var b=c;
a("#store-input-zip").val()&&(b+=a("#store-input-zip").val());a("#store-frame").attr("src",b)}});a("#store-finder-container").keypress(function(c){13==c.which&&a("#search-att-store").trigger("click")});a("#store-input-zip").keyup(function(){var c=a(this),b=c.val();b&&8<b.length?c.css("width","10em"):c.css("width","5em")})});m.when("A").execute(function(k){var a=k.$;b.TSAjaxCartRequest=function(c,b,f,g){a.ajax({cache:!1,data:{asin:b,sId:f,action:c},dataType:"json",success:function(a,c){a&&0==a.error&&
g(a.asin)},type:"GET",url:"/gp/digital/fiona/ajax/modify-cart"})};var c=[];b.TSAjaxCartAdd=function(a,b){c[a]="adding";TSAjaxCartUpdateStatus(a);TSAjaxCartRequest("add",a,b,TSAjaxCartAddComplete)};b.TSAjaxCartAddComplete=function(a){c[a]="added";TSAjaxCartUpdateStatus(a)};b.TSAjaxCartRemove=function(a,b){c[a]="removing";TSAjaxCartUpdateStatus(a);TSAjaxCartRequest("remove",a,b,TSAjaxCartRemoveComplete)};b.TSAjaxCartRemoveComplete=function(a){delete c[a];TSAjaxCartUpdateStatus(a)};b.TSAjaxCartUpdateStatus=
function(b){if(null==b)for(var e in c)TSAjaxCartUpdateStatus(e);a(".AjaxCartAdd_"+b).each(function(a,e){e.style.display=c[b]?"none":""});a(".AjaxCartProcessing_"+b).each(function(a,e){e.style.display="adding"==c[b]||"removing"==c[b]?"":"none"});a(".AjaxCartRemove_"+b).each(function(a,e){e.style.display="added"==c[b]?"":"none"})}});m.when("A").execute(function(k){var a=k.$;b.VideoFooter=function(){};VideoFooter.mouseOver=function(c,d,e,f){b.clearTimeout(VideoFooter.mouseOutTimer);for(c=a(c).parents("tr").prev();0<
c.length&&(0==c.find(".kindle-video-slate").length||"none"==c.find(".kindle-video-slate").css("display"));)c=c.prev();var g=c.outerHeight(),l=c.outerWidth(),h=c.position();1==c.children().length?c.append("<td width=100% valign=top><img height='"+e+"' width='"+f+"' src='"+d+"'/></td>"):c.children(":last-child").find("img").attr("src",d).css("display","block");d=g-e;0>d&&(d=0);f=l-f;0>f&&(f=0);c.children(":last-child").find("img").css("position","absolute").css("top",h.top).css("left",h.left).css("border-bottom",
d+"px solid white").css("border-right",f+"px solid white")};VideoFooter.mouseOut=function(a){b.clearTimeout(VideoFooter.mouseOutTimer);VideoFooter.mouseOutTimer=b.setTimeout(function(){VideoFooter.realMouseOut(a)},100)};VideoFooter.realMouseOut=function(c){for(c=a(c).parents("tr").prev();0<c.length&&(0==c.find(".kindle-video-slate").length||"none"==c.find(".kindle-video-slate").css("display"));)c=c.prev();2==c.children().length&&c.children(":last-child").find("img").css("display","none")};b.TuringVideo=
function(){};TuringVideo.clean=function(c){a(c).find("div").each(function(c,b){-1!=b.id.indexOf("_chiDiv")&&a(b).children().each(function(){""==a(this).html()&&a(this).remove()})})}});m.when("A","legacy-popover").execute(function(k){var a=k.$,c=["tc","lptc"],d=["titleCount","lowPriceTitleCount"];b.restrictionChange=function(b){var f=a("#"+b+" select").get(0),g=f.options[f.selectedIndex].value,l=f.options[f.selectedIndex].innerHTML;if(f=wwSettings[g]){a("div.ap_body:has(div#"+b+") ~ div.ap_titlebar .ap_title").html(popoverTitle2);
var h="<h2>"+l+'</h2><div style="margin:10px 0">';if(wwStrings["str_override-"+g])var k=wwStrings["str_override-"+g].replace(/\$\{arrowImg\}/g,arrowTag),h=h+(k+"</div>");else{k="";if(f.sh)f.pa&&wwStrings.str_notUSPower&&(k+=wwStrings.str_notUSPower.replace(/\$\{arrowImg\}/g,arrowTag).replace(/\$\{countryName\}/g,l)),k+=wwStrings["str_ship-yes"].replace(/\$\{val\}/g,l);else if(f.co){if(setTitleCountLoad(g,b))return;k=wwStrings["str_ship-no-content-yes"].replace(/\$\{val\}/g,l).replace(/\$\{titleCount\}/g,
f.tc)}else k=wwStrings["str_ship-no"].replace(/\$\{val\}/g,l);h+=k+" <br/></div>"}if(f.sh){if(setTitleCountLoad(g,b))return;var h=h+'<div style="margin:10px 0 0 25px">',h=f.wl?h+wwStrings["str_wireless-yes"]:h+wwStrings["str_wireless-no"],h=h+"<br/><br/>",n;for(n in c){var l=f.eu?wwStrings["str_priceRange-eu-yes"]:wwStrings["str_priceRange-eu-no"],r=wwStrings.str_titleCount_authority;wwStrings["str_titleCount_authority-"+g]&&(r=wwStrings["str_titleCount_authority-"+g]);f[c[n]]&&(k=wwStrings["str_"+
d[n]].replace(/\$\{val\}/g,f[c[n]]),k=k.replace(/\$\{priceRange\}/g,l).replace(/\$\{authority\}/g,r),h+=k+" <br/><br/>")}h+='<a href="#" onclick="jQuery(\'.ap_close\').click();return false">'+wwStrings.str_learnMore+"</a><br/><br/>";h=h+"</div><div><hr><br/>"+wwStrings.str_importantProductInformation;h+="</div>";h+='<div style="margin:10px 0 0 25px">';h+='<ul style="list-style-type:disc">';wwStrings["str_override2-"+g]&&(h+=wwStrings["str_override2-"+g]);!f.wl&&wwStrings["str_wireless2-no"]&&(h+=
"<li>"+wwStrings["str_wireless2-no"]+"</li>");f.gl&&wwStrings["str_global-yes"]?h+="<li>"+(f.eu?wwStrings["str_global-yes-eu"]:wwStrings["str_global-yes"])+"</li>":!f.gl&&wwStrings["str_global-no"]&&(h+="<li>"+(f.eu?wwStrings["str_global-no-eu"]:wwStrings["str_global-no"])+"</li>");wwStrings["str_powerAdapter-"+g]?h+="<li>"+wwStrings["str_powerAdapter-"+g]+"</li>":f.pa&&wwStrings["str_powerAdapter-notUS"]?h+="<li>"+wwStrings["str_powerAdapter-notUS"]+"</li>":wwStrings.str_powerAdapter&&(h+="<li>"+
wwStrings.str_powerAdapter+"</li>");wwStrings["str_override4-"+g]&&(h+=wwStrings["str_override4-"+g]);f.wl&&(wwStrings["str_whispernet-yes"]&&!wwStrings["str_disable-whispernet-yes-"+g]&&(h+="<li>"+wwStrings["str_whispernet-yes"]+"</li>"),wwStrings["str_whispernet2-yes"]&&!wwStrings["str_disable-whispernet2-yes-"+g]&&(h+="<li>"+wwStrings["str_whispernet2-yes"]+"</li>"));wwStrings.str_USPricing&&(h+="<li>"+wwStrings.str_USPricing+"</li>");f.br&&!f.snd&&wwStrings["str_browser-yes_social-yes"]?h+="<li>"+
wwStrings["str_browser-yes_social-yes"]+"</li>":f.br||f.snd||!wwStrings["str_browser-no_social-yes"]?f.br&&f.snd&&wwStrings["str_browser-yes_social-no"]?h+="<li>"+wwStrings["str_browser-yes_social-no"]+"</li>":!f.br&&f.snd&&wwStrings["str_browser-no_social-no"]&&(h+="<li>"+wwStrings["str_browser-no_social-no"]+"</li>"):h+="<li>"+wwStrings["str_browser-no_social-yes"]+"</li>";wwStrings.str_warranty&&(h+="<li>"+wwStrings.str_warranty+"</li>");wwStrings.str_terms&&(h+="<li>"+wwStrings.str_terms+"</li>");
wwStrings["str_override3-"+g]&&(h+=wwStrings["str_override3-"+g]);h+="</ul>";h+="</div>"}a("#"+b+" .rstrc_dynamic").empty().append(h);addRestrictionPopovers();a("#"+b+" .rstrc_dynamic .tww_anz_link").attr("href",anzUrl)}};b.setTitleCountLoad=function(c,b){return-1==wwSettings[c].tc?(a.getJSON("/gp/digital/fiona/ajax/titleCount",{sid:sessionId,country:c},function(a){wwSettings[a.iso].tc=a.c;restrictionChange(b)}),!0):!1};b.addRestrictionPopovers=function(){a(".tww_popup_link").unbind("click");a(".tww_popup_link").amazonPopoverTrigger({title:popoverTitle,
localContent:"#tww_rstrc_popover",closeEventInclude:"CLICK_OUTSIDE",closeText:"Close",modal:"true",width:670,location:"centered"});a(".tww_coverage_map_link").unbind("click");a(".tww_coverage_map_link").bind("click",function(a){a.stopPropagation();a.preventDefault();return amz_js_PopWin(this.href,"AmazonHelp","width=850,height=530,resizable=1,scrollbars=0,toolbar=0,status=0,location=0")}).attr("href",coverageMapUrl).attr("target","AmazonHelp")}});b.KDS||(b.KDS={});b.KDS.ajax||(b.KDS.ajax={});m.when("A").execute(function(k){var a=
k.$;b.KDS.ajax.RefTag=function(){return{send:function(c,b){if(!c)throw Error("refTag is not defined");a.post((b||"/gp/digital/fiona/ajax/log.html")+"/ref="+c)}}}});b.KindleDelayedManager={};b.KindleDelayedManager.unloadedWidgets=[];b.KindleDelayedManager.register=function(b,a){this.unloadedWidgets[b]=a};b.KindleDelayedManager.loadWidget=function(b){this.unloadedWidgets[b]&&(this.unloadedWidgets[b](),this.unloadedWidgets[b]=u)};m.when("A","kindleDeviceJSExtended").register("kindleCountrySelect",function(k){var a=
k.$;b.kindleDeviceCountrySelect={initialize:function(){var c;c=["#sh_rstrc_popover","#shastaIntl_rstrc_popover"];var b,e;for(e in c)0<a(c[e]).length&&(b=b||[],b.push(c[e]));c=b;for(var f in c)switch(c[f]){case "#sh_rstrc_popover":addShastaRestrictionPopovers();break;case "#shastaIntl_rstrc_popover":ShastaSku.addPopovers()}}}});m.when("A").execute(function(k){function a(a){var e=a+"_feature_div",f=e+"_outer";0<c("#"+e).length&&(c("#"+e).wrap('<div id="'+f+'" style="overflow:hidden;" />'),b.DetailPageFramework.registerCallback("before_redraw",
a,function(){var a=c("#"+e).height();c("#"+f).height(a)}),b.DetailPageFramework.registerCallback("after_redraw",a,function(){var a=c("#"+f).height(),b=c("#"+e).height();b<a&&(b=a);c("#"+f).height(b)}))}var c=k.$;"undefined"!=typeof b.DetailPageFramework&&a("product-title")});m.when("A","legacy-popover").execute(function(k){var a=k.$;b.ShastaSku=function(){};b.ShastaSku.applyCOUChange=function(){var c=a("#sh_rstrc select option:selected");b.ShastaSku.updateTwister(c.attr("value"),c.html());a("#sh_rstrc #sh_postCOUDropdownCountryInfo").hide();
a("#sh_rstrc #sh_postCOUDropdownCoverageMap").hide();a("#sh_rstrc #sh_wifiOnly").hide();a("#sh_rstrc #sh_usAdapter").hide();a("#sh_rstrc #sh_ukAdapter").hide();a("#sh_rstrc #sh_deAdapter").hide();a("span.check_cov").hide();""==c.attr("value")||0==wwSettings[c.attr("value")].sh?b.ShastaSku.disableBuyBox(c.attr("value"),c.html()):(b.ShastaSku.enableBuyBox(c.attr("value"),c.html()),a("#sh_rstrc #sh_postCOUDropdownCountryInfo").show(),0==wwSettings[c.attr("value")].tw&&(a("#sh_rstrc #sh_postCOUDropdownCoverageMap").show(),
a("span.check_cov a").attr("class",b.ShastaSku.getMapSettingsForCountry(c.attr("value")).anchor_class),a("span.check_cov").show()),""==wwSettings[c.attr("value")].pa?a("#sh_rstrc #sh_usAdapter").show():"uk"==wwSettings[c.attr("value")].pa?a("#sh_rstrc #sh_ukAdapter").show():"de"==wwSettings[c.attr("value")].pa?a("#sh_rstrc #sh_deAdapter").show():1==wwSettings[c.attr("value")].tw&&a("#sh_rstrc #sh_wifiOnly").show());a("#countryOfUseSelect").val(a(c).val())};b.ShastaSku.onCOUChange=function(c){c=c.val();
a("#shastaIntl_rstrc_popover .rstrc_dynamic").empty();a("#shastaIntl_rstrc_popover select").val(c);b.ShastaSku.applyCOUChange();c&&""!==c&&(shastaRestrictionChange("shastaIntl_rstrc_popover"),b.setTimeout('jQuery.AmazonPopover.displayPopover(createShastaPopoverOptions({localContent:"#shastaIntl_rstrc_popover"}))',0))};b.ShastaSku.onPopoverChange=function(c){shastaRestrictionChange("shastaIntl_rstrc_popover");a("#sh_rstrc select").val(c.val());b.ShastaSku.applyCOUChange()};b.ShastaSku.hideElement=
function(c){a("#sh_rstrc #"+c).css("display","none")};b.ShastaSku.showElement=function(c){a("#sh_rstrc #"+c).css("display","block")};b.ShastaSku.disableBuyBox=function(c,d){""==c?a("#bb_cou_header_enabled").css("display","none"):(a("#bb_cou_header_enabled span").html(d),a("#bb_cou_header_enabled").css("display","block"),popoverComment="select a valid entry to the left");b.ShastaSku.disableWishList();a("#buyboxDivId input[type=image]").each(function(){if("none"!=a(this).css("display")){var c="To "+
a(this).attr("alt")+",<br/>"+popoverComment;a(this).attr("titleDisabled")||a(this).attr("titleDisabled",a(this).attr("title"));a(this).removeAmazonPopoverTrigger&&a(this).removeAmazonPopoverTrigger();a(this).css("cursor","not-allowed").bind("click",function(){return!1}).attr("title","").amazonPopoverTrigger({hoverHideDelay:0,hoverShowDelay:0,literalContent:'<div class="bb_disabled_popover_text">'+c+"</div>",location:["left","auto"],locationAlign:"middle",locationMargin:-10,showOnHover:!0,skin:null,
width:null})}})};b.ShastaSku.enableBuyBox=function(c,d){a("#bb_cou_header_enabled span").html(d);a("#bb_cou_header_enabled").css("display","block");b.ShastaSku.disableWishList();a("#buyboxDivId input[type=image]").each(function(){"none"!=a(this).css("display")&&(a(this).css("cursor","").unbind("click"),a(this).attr("titleDisabled")&&a(this).attr("title",a(this).attr("titleDisabled")),a(this).removeAmazonPopoverTrigger&&a(this).removeAmazonPopoverTrigger())});b.ShastaSku.enableWishList()};b.ShastaSku.disableWishList=
function(){a("#wishlist_btn_div_js input").addClass("bc-hidden");a("#wishlist_btn_div_js").children("span").removeClass("bc-hidden")};b.ShastaSku.enableWishList=function(){a("#wishlist_btn_div_js input").removeClass("bc-hidden");a("#wishlist_btn_div_js").children("span").addClass("bc-hidden")};b.ShastaSku.htmlCache={};b.ShastaSku.updateTwister=function(c,d){var e=a("form#handleBuy input#ASIN").val(),f=0,g;for(g in offerIDs)if(g==e){f=1;break}if(f){var e={"kindle-availability":{name:"kindle-availability-messaging",
unavailableHTML:function(a,c){var d=wwSettings[a];if(d.co){if(setShastaTitleCountLoad(a,function(){b.ShastaSku.updateTwister(a,c)}))return"";d=wwStrings["str_ship-no-content-yes"].replace(/\$\{val\}/g,c).replace(/\$\{titleCount\}/g,d.tc)}else d=wwStrings["str_ship-no"].replace(/\$\{val\}/g,c);return"<div class='buying'><span class='availRed'>"+d+"</span></div>"}},"dp-fast-track":{name:"dp-fast-track"}},l;for(l in e)a("#"+l).css("opacity","0.5").css("filter","alpha(opacity=50)");if(""!=c)if(wwSettings[c].sh&&
wwSettings[c].ia){f=wwSettings[c].ia;if(null==b.ShastaSku.htmlCache[f]){a.getJSON("/gp/twister/ajax/prefetch",{json:1,parentAsin:f,asinList:f},function(a){b.ShastaSku.prefetchCallback(a,c,d)});return}for(l in e)a("#"+l).html(b.ShastaSku.htmlCache[f][e[l].name]);a("form#handleBuy input#ASIN").attr("value",f);a("form#handleBuy input#offerListingID").attr("value",offerIDs[f])}else for(l in e)f="",e[l].unavailableHTML&&(f=e[l].unavailableHTML(c,d)),a("#"+l).html(f);else for(l in e)a("#"+l).html("");for(l in e)a("#"+
l).css("display","block").css("opacity","1").css("filter","alpha(opacity=100)")}};b.ShastaSku.prefetchCallback=function(a,d,e){for(var f in a){b.ShastaSku.htmlCache[f]={};for(var g in a[f])b.ShastaSku.htmlCache[f][g]=a[f][g]}b.ShastaSku.updateTwister(d,e)};b.ShastaSku.onCoverageClick=function(){var c=a("#sh_rstrc select option:selected").attr("value");""!=c&&wwSettings[c].ia&&(c=b.ShastaSku.getMapSettingsForCountry(c).url)&&amz_js_PopWin(c,"AmazonHelp","width=850,height=530,resizable=1,scrollbars=0,toolbar=0,status=0,location=0");
return!1};b.ShastaSku.addPopovers=function(){var c=createShastaPopoverOptions({localContent:"#shastaIntl_rstrc_popover",onShow:function(){b.ShastaSku.onPopoverChange(a("#shastaIntl_rstrc_popover select"))}});addShastaPopovers(c);return c};b.ShastaSku.getMapSettingsForCountry=function(a){var b={};switch(wwSettings[a].ia){case "B003DZ1Y72":return b.url=ATTCoverageMapUrl,b.anchor_class="shasta_att_coverage_map_link",b;case "B003DZ1Y7M":return b.url=VFCoverageMapUrl,b.anchor_class="shasta_vf_coverage_map_link",
b}}});m.when("A").register("kindleDeviceJSExtended",function(k){var a=k.$;b.KindleVideoPicker={};b.KindleVideoPicker.select=function(c){a(".kindle-video-picker .video").each(function(){a(this).hide()});a("#video"+c).show()};b.KindleVideoPicker.init=function(){a(".kindle-video-picker .noJS-displayNone").each(function(){a(this).removeClass("noJS-displayNone")});a(".kindle-video-picker .noJS-show").each(function(){a(this).removeClass("noJS-show").addClass("noJS-displayNone")});this.select(0)}});m.when("A").execute(function(k){var a=
k.$;b.Tanuki=function(){};b.Tanuki.init=function(){b.Tanuki.tabList=[];b.Tanuki.tabContentList=[];b.Tanuki.scanHTML(b.Tanuki.tabList,b.Tanuki.tabContentList);b.Tanuki.buildTabHTML();b.Tanuki.selectedTab=[0,0];b.Tanuki.selectTab(0,0);var c=a("#customerReviews").prevAll("hr");0<c.length&&a(c[0]).remove();addShastaRestrictionPopovers()};b.Tanuki.scanHTML=function(c,d){a("#kindleTabbedBTF").children().each(function(){if(a(this).hasClass("kindle-main-tab"))c.push([a(this).text()]),d.push([""]);else if(a(this).hasClass("kindle-tab-category-header"))c.push([a(this).text(),
[]]),d.push([]);else if(a(this).hasClass("kindle-sub-tab"))if(c[c.length-1]==u||c[c.length-1][1]==u)console.warn("Subtab '"+a(this).text()+"' is detected as a subtab without preceding category header");else{c[c.length-1][1].push(a(this).text());var e=d[d.length-1].length;0<e&&(d[d.length-1][e-1]+=b.Tanuki.nextLinkHTML(a(this).text()));d[d.length-1].push("")}else{var e=d.pop(),f=e.pop(),g;g=this.outerHTML?this.outerHTML:a(this).wrap("<div/>").parent().html();e.push(f+g);d.push(e)}})};b.Tanuki.buildTabHTML=
function(){for(var c=a("<td valign='top'>"),d=0;d<b.Tanuki.tabList.length;d++){var e=a("<div id='tanuki_tab_"+d+"' class='stacked_tab'>"),f=a("<div class='major_tab_container'>");f.css("border-top","1px solid white");var g=a("<div class='major_tab_inner_container'>"),l=a("<div>").attr("id","tanuki_tab_"+d+"_label").html(b.Tanuki.tabList[d][0]).click(function(a){b.Tanuki.tabClick(a,"tanuki_tab_")});b.Tanuki.tabList[d][1]!=u?l.addClass("category_header"):l.addClass("major_tab");e.append(f.append(g.append(l)));
if(b.Tanuki.tabList[d][1]!=u){g=a("<div class='minor_tab_container'>");l=a("<div class='minor_tab_inner_container'>");for(f=0;f<b.Tanuki.tabList[d][1].length;f++){var h=a("<div id='tanuki_tab_"+d+"_"+f+"'>").addClass("minor_tab").html(b.Tanuki.tabList[d][1][f]).click(function(a){b.Tanuki.tabClick(a,"tanuki_tab_")});l.append(h)}e.append(g.append(l))}c.append(e)}e=a("<td valign='top' class='rightCol'>");for(d=0;d<b.Tanuki.tabContentList.length;d++){g=a("<div id='tanuki_content_"+d+"'>");for(f=0;f<b.Tanuki.tabContentList[d].length;f++)l=
a("<div id='tanuki_content_"+d+"_"+f+"'>").addClass("tanuki_content").html(b.Tanuki.tabContentList[d][f]),g.append(l);e.append(g)}c=a("<tr>").append(c).append(e);a("#kindleTabbedBTF").html(a("<table cellpadding=0 cellspacing=0>").append(c))};b.Tanuki.selectTab=function(c,d,e){a("#kindleTabbedBTF .stacked_tab").each(function(b,e){b==c?(a(e).addClass("stacked_tab_selected"),a(e).find(".major_tab").addClass("major_tab_selected"),a(e).find(".category_header").addClass("category_header_selected"),a(e).find(".major_tab_container").removeClass("major_tab_before_selected"),
a(e).find(".minor_tab").each(function(){a(this).attr("id")=="tanuki_tab_"+c+"_"+d?a(this).addClass("minor_tab_selected"):a(this).removeClass("minor_tab_selected")}),a(e).find(".minor_tab_container").slideDown()):(a(e).removeClass("stacked_tab_selected"),a(e).find(".major_tab").removeClass("major_tab_selected"),a(e).find(".category_header").removeClass("category_header_selected"),a(e).find(".minor_tab").removeClass("minor_tab_selected"),a(e).find(".major_tab_container").removeClass("major_tab_before_selected"),
a(e).find(".minor_tab_container").each(function(){"none"!=a(this).css("display")&&a(this).slideUp()}),b==c-1&&a(e).find(".major_tab_container").addClass("major_tab_before_selected"))});a("#kindleTabbedBTF .tanuki_content").each(function(){a(this).attr("id")=="tanuki_content_"+c+"_"+d?a(this).show():a(this).hide()});if(c!=b.Tanuki.selectedTab[0]||d!=b.Tanuki.selectedTab[1]){var f="/gp/digital/fiona/ajax/log.html/ref=tnk_tab_"+c+"_"+d;null!=e&&(f+="_"+e);a.ajax({cache:!1,dataType:"json",type:"POST",
url:f})}b.Tanuki.selectedTab=[c,d]};b.Tanuki.tabClick=function(a,d){var e=a.target.id,e=e.substring(d.length),f=e.match(/^\d+/)[0],e=e.substring(f.toString().length+1),e=e.match(/^\d+/),e=e==u?0:e[0];b.Tanuki.selectTab(f,e)};b.Tanuki.nextTab=function(){b.Tanuki.selectTab(b.Tanuki.selectedTab[0],parseInt(b.Tanuki.selectedTab[1])+1,"nxt")};b.Tanuki.nextLinkHTML=function(a){return"<div style='margin:10px 0'><a class='arrow-to-link' href='javascript:window.Tanuki.nextTab()' style='text-decoration:none'><span class='arrow-to-link-span' style='font-size:15px;'><span style='color:#E47911'>Next: </span><span style='color:#666666'>"+
a+"</span></span></a></div>"};a.fx.prototype.show=function(){this.options.orig[this.prop]=a.attr(this.elem.style,this.prop);this.options.show=!0;this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());a(this.elem).show()};a.fx.prototype.hide=function(){this.options.orig[this.prop]=a.attr(this.elem.style,this.prop);this.options.hide=!0;this.custom(this.cur(),1)}});m.when("A","legacy-popover").register("kindleDeviceMayanJS",function(k){function a(){var a=c(".kmd-collapsible"),b=e.width();
if(0>(f-1200)*(b-1200)||!f)1200<b?a.show():a.hide(),f=b}var c=k.$,d,e=c(b),f;c(b).resize(function(){clearTimeout(d);d=setTimeout(function(){a()},500)});a();c(".kmd-paragraph-show-more").click(function(){c(this).siblings(".kmd-hidden-paragraph").show();c(this).hide()});c(".kmd-paragraph-show-less").click(function(){var a=c(this);a.siblings(".kmd-hidden-paragraph").hide();a.hide();a.siblings(".kmd-paragraph-show-more").show()});k={};k={showOnHover:!0,skin:'<div class="kmd-tooltip-skin"><div class="ap_content"></div></div>',
hoverShowDelay:400,width:null,location:"bottom",literalContent:" ",onShow:function(){var a=this.attr("kmdtooltip");c(".kmd-tooltip-skin .ap_content").html(a)}};c(".kmd-tooltip").amazonPopoverTrigger(k)});m.when("A","legacy-popover").register("kindleFamilyPageJS",function(k){function a(){c(".kfp-tab").removeClass("selected");c(".kfp-tab-content").hide()}var c=k.$;k=location.hash;var d,e=b.KDS&&b.KDS.ajax&&b.KDS.ajax.RefTag;"#needhelpchoosing"===k||"#compare"===k?(d="#kfp-tab-content1",a(),c(d).show(),
c("#kfp-tab1").addClass("selected"),"#compare"===k&&0<c("a[name=compare]").length&&c("a[name=compare]")[0].scrollIntoView(!0)):d="#kfp-tab-content0";c("#kfp-tabs a").click(function(e){e=c(this);var g=c(b),l=g.scrollTop(),h=e.attr("href");h!==d&&(a(),e.parent().addClass("selected"),c(h).show(),d=h,g.scrollTop(l));return!1});c(".kpf-ajax-ref-tag").click(function(){var a=c(this);a.attr("href");a=a.attr("ref");e&&a&&e.send(a)});k={};k={showOnHover:!0,skin:'<div class="kmd-tooltip-skin"><div class="ap_content"></div></div>',
hoverShowDelay:400,width:null,location:"bottom",literalContent:" ",onShow:function(){var a=this.attr("kmdtooltip");c(".kmd-tooltip-skin .ap_content").html(a)}};c(".kmd-tooltip").amazonPopoverTrigger(k);"undefined"===typeof b.KDS&&(b.KDS={});b.KDS.ajax||(b.KDS.ajax={});b.KDS.ajax.RefTag=function(a){return{send:function(c,b){if(!c)throw Error("refTag is not defined");a.post((b||"/gp/digital/fiona/ajax/log.html")+"/ref="+c)}}}(c)});b.KDS||(b.KDS={});b.KDS.common||(b.KDS.common={});m.when("A","legacy-popover").register("kindleFamilyStripeJS",
function(k){b.KDS.common.FamilyStripe=function(a){function c(){if(!n){var c=b.KDS.common.MiniChart;c.slideUp(h);n=!0;if(l){h!=p&&(k=p);if(-1==k)return;a(g[k]).css({left:"50%"});for(var d=0;d<g.length;d++)d!=h&&d!=k&&a(g[d]).css({left:"100%"});h=k;k=-1}else h=(h+1)%g.length;f.animate({left:"-100%"},1E3,"easeInOutExpo",function(){a(this).css({left:0});g.each(function(c,b){for(var d=a(b),e=c-h;0>e;)e+=g.length;e%=g.length;d.css({left:""+50*e+"%"})});-1!=c.getDisplayedChartIndex()&&c.slideDown(h);n=!1})}}
function d(c,b,d){return function(){var e=a("<img/>");e.attr("src",b).addClass("kfs-img").css({"margin-top":d});c.before(e).remove()}}var e=a('div[id^="kfs_family_"]');a.each(e,function(c,b){var d=a(b),e=d.find('div[id^="kfs_popover_content_"]');e&&d.amazonPopoverTrigger({localContent:e,skin:"",location:"bottom",locationOffset:[0,-30],hoverShowDelay:400,showOnHover:!0,width:null,align:"center",closeEventInclude:0<d.parents("#kfs-overview-stripe").length?"CLICK_TRIGGER":""})});var f=a("#kfs-slide-control"),
g=a(".kfs-bg-container"),l,h=0,k=-1,n=!1,r=a(".kfs-sliding-arrow.kfs-sliding-trigger");a.easing.easeInOutExpo=function(a,c,b,d,e){return 0==c?b:c==e?b+d:1>(c/=e/2)?d/2*Math.pow(2,10*(c-1))+b:d/2*(-Math.pow(2,-10*--c)+2)+b};for(var p=-1,e=0;e<g.length;e++)"kfs-overview-stripe"===a(g[e]).attr("id")&&(p=e,l=a(g[p])),-1!=a(g[e]).attr("style").indexOf("left: 0%")&&(h=e);a(".kfs-sliding-arrow-container").click(c).hover(function(){r.addClass("kfs-hover")},function(){r.removeClass("kfs-hover")});(function(){for(var c=
a(".kfs-lazy-img"),b=0,e=c.length;b<e;b++){var f=c.eq(b),g=f.attr("data-family-image-url"),h=f.attr("data-family-image-margin-top"),l=new Image;l.onload=d(f,g,h);l.src=g}})();return{slide:c,slideTo:function(a){k=a;c()},setCurrentStripeIndex:function(a){h=a}}}(k.$)});m.when("A").register("kindleFamilyStripeJS:MiniChart",function(k){function a(){l.hide();f=-1;d(!0)}function c(a){e("#kfs-chart"+a).show();d(!1);f=a}function d(a){var c=l.parents("div"),b=e("div#ap_container"),d=e(".kfs-inner-container");
a?(c.css("z-index","1"),e(".kfs-popover-container").hide(),b.removeClass("hideKfsPopovers"),d.removeClass("hideKfsPopovers")):(c.css("z-index","199"),b.addClass("hideKfsPopovers"),d.addClass("hideKfsPopovers"))}var e=k.$;b.KDS||(b.KDS={});b.KDS.util||(b.KDS.util={});b.KDS.util.SmoothScroll={run:function(a,c,d){e(document.body).animate({scrollTop:a.offset().top},400,function(){c&&(location.hash="#"+c);d&&b.KDS.ajax.RefTag.send(d)})}};b.KDS.common||(b.KDS.common={});k=e(document.body);var f=-1,g=e(".kfs-chart-close"),
l=e(".kfs-chart"),h=e(".kfs-chart-to-full-chart a");g.click(a);h.click(function(c){c.preventDefault();c=e(this).attr("hash").replace("#","");b.KDS.util.SmoothScroll.run(e("a[name="+c+"]"),c,"kdp_minichart_full_chart");a()});l.click(function(a){a.stopPropagation()});k.click(function(c){e(c.target).hasClass("kfs-sliding-trigger")||a()});b.KDS.common.MiniChart={show:function(a){c(a||0);b.KDS.ajax.RefTag.send("kdp_minichart_quick_compare")},hide:a,toggle:function(b){-1===f?(c(b),f=b):(a(),f=-1)},slideDown:function(a){var c=
e("#kfs-chart"+a);d(!1);c.slideDown(200,function(){f=a})},slideUp:function(a){e("#kfs-chart"+a).slideUp(300,function(){d(!0)})},getDisplayedChartIndex:function(){return f},skipAndScroll:function(){b.KDS.util.SmoothScroll.run(e("a[name=kindle-compare]"),"kindle-compare","kdp_fs_scroll_to_compare")}}});m.when("A","Airy").execute(function(k){function a(){e="#kib-thumb-"+b.kibConfig.L.thumbsShow[0];d(".kib-thumb").click(p);d("#kib-thumb-"+b.kibConfig[f].thumbsShow[0]).click();m(!0);if("autoplayvideo"==
b.kibMAs[0].type){var a=[],a=n();g=r(Airy,a)}}function c(a){var c=a.current_hovered_asin;null==c&&(c=a.current_asin);a=kibAsinToUrls[c];null==a&&(a=kibAsinToUrls["default"]);for(c=0;c<a.length;c++){var d=a[c],e="L"===f,q="Y"===d.isTwistableLarge,g="Y"===d.isTwistableSmall,h="Y"===d.isTwistableThumb;e&&q?jQuery("#kib-ma-container-"+c+" img").attr("src",d.largeImageURL):!e&&g&&jQuery("#kib-ma-container-"+c+" img").attr("src",d.smallImageURL);h&&jQuery("#kib-thumb-"+c).attr("src",d.thumbImageURL);e=
b.kibMAs[c];"image"===e.type&&(q&&(e.imageUrls.L=d.largeImageURL),g&&(e.imageUrls.S=d.smallImageURL),h&&(e.thumbnailImageUrls["default"]=d.thumbImageURL))}}var d=k.$;if(b.kibMAs&&b.kibConfig){var e,f="L",g,l=[],h=function(a){return"none"==a?0:parseInt(a.substring(a.lastIndexOf("-")+1,a.length))},w=function(a,c){if(e!=a||c!=f){var q=h(e),l=h(a),k="kib-ma-container-"+q,p="kib-ma-container-"+l,w=b.kibMAs[l],r=b.kibConfig[c].mediaWidth,m=b.kibConfig[c].mediaHeight,v=b.kibConfig.mediaMarginBottom;("image"==
b.kibMAs[q].type||b.kibConfig.useHTML5Video)&&d("#"+k).hide();d("#"+k).css("z-index","0");("image"==w.type||b.kibConfig.useHTML5Video)&&d("#"+p).show();d("#"+p).css("z-index","1");f!=c&&d("#kib-ma-container-base").css("width",r).css("height",m-v);q="";"video"==w.type?q=w.preplayImages[c]:"image"==w.type&&(q=w.imageUrls[c]);"video"!=w.type&&"image"!=w.type||d("#kib-ma-container-"+l+" img").attr("src",q).attr("alt",w.altText||"").width(r).height(m-v);"autoplayvideo"==b.kibMAs[0].type&&(d("#airy-player-container").css({width:r+
"px"}),d("#airy-player-container").css({height:m+"px"}),l=[],l=n(),g&&g.loadMedia({mediaSourceInfo:l.videoUrl,slateImages:{preloadSlate:l.preSlateImage,postMediaSlate:l.postSlateImage}}))}},n=function(){var a=1270<=d(b).width()?"L":"S",c=b.kibMAs[0].preplayImages[a],a=b.kibMAs[0].postplayImages[a],e=[];e.videoUrl=b.kibMAs[0].videoUrl;var f=b.kibMAs[0].videoUrl;0==d("#autoplayDuration").length&&(f="<video id='autoplayDuration' style='display:none' src='"+f+"'></video>",d("#airy-player-container").append(f));
f=d("#autoplayDuration")[0].duration;e.videoDuration=f;e.preSlateImage=c;e.postSlateImage=a;return e},r=function(a,c){if(!g){l=b.kibMAs[0].airyConfig;l.ignoreBundledSkin=!0;l.streamingUrls=c.videoUrl;l.backgroundColor="transparent";l.flashParams={wmode:"transparent"};l.isShowFirstFrameWhenReadyEnabled=!0;l.experiments={supportChromelessPlayback:!0};l.slateImages={preloadSlate:c.preSlateImage,postMediaSlate:c.postSlateImage};l.bindings={videounsupported:function(){},error:function(){},ended:function(){g.seek(0)}};
l.cuePoints=[{values:c.videoDuration-1,type:"position",callback:function(a,c,b){a=b.durationSeconds-b.playheadTimeSeconds;d("#airy-player-container").css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){d("#airy-player-container").css({"background-color":"transparent","z-index":-1});d(this).show().css("opacity",1)})}}];g=a.embed(l);var e=!0;"Microsoft Internet Explorer"==navigator.appName?e=!1:-1<navigator.appVersion.indexOf("Trident")&&(e=!1);e&&g.play({isAsync:!0})}return g},
p=function(a){var c=null;null!=a&&(c=a.target.id);d(".kib-thumb-container-selected").removeClass("kib-thumb-container-selected");d("#"+c).parent().addClass("kib-thumb-container-selected");w(c,f);e=c},m=function(a){var c=1270<=d(b).width()?"L":"S",q={L:"S",S:"L"};if(c!=f||a){a=b.kibConfig[c].thumbsShow;d(".kib-thumb-container").hide();for(var h in a)d("#kib-thumb-container-"+a[h]).show();"none"==d("#"+e).parent().css("display")?(h="kib-thumb-"+a[0],d(".kib-thumb-container-selected").removeClass("kib-thumb-container-selected"),
d("#"+h).parent().addClass("kib-thumb-container-selected"),w(h,c),e=h,"autoplayvideo"==b.kibMAs[a[0]].type&&g.pause()):w(e,c);f=c;d("#kindle-video-footer").show();d("#kib-container").css("width",b.kibConfig[c].mediaWidth);d("#kindle-video-footer").css("width",b.kibConfig[c].mediaWidth);d("#kindle-video-footer-inner").css("width",b.kibConfig[c].minFooterWidth);d("#kindle-img-links-pere-"+c).show();d("#kindle-img-links-pere-"+q[c]).hide()}},q;d(b).resize(function(){clearTimeout(q);q=setTimeout(function(){m()},
500)});a();"object"==typeof DetailPageFramework&&DetailPageFramework.registerCallback&&DetailPageFramework.registerCallback("before_redraw","center-11-2",c)}});b.KDS||(b.KDS={common:{},util:{}});b.KDS.common||(b.KDS.common={});b.KDS.util||(b.KDS.util={});m.when("A","kindleDeviceCommonJS").register("kindleLinkBlockJS",function(k){b.KDS.common.LinkBlock=function(a){return{init:function(){a("a.kds-smooth-scroll").click(function(c){c.preventDefault();c=a(this).attr("hash").replace("#","");for(var d=a(this).attr("class").split(/\s+/),
e=0;e<d.length;e++)if(-1!=d[e].indexOf("reftag_")){var f=d[e].substring(7);""==f&&(f=null)}d=a("a[name="+c+"]");d.length||(d=a("#"+c));b.KDS.util.SmoothScroll.run(d,c,f)})}}}(k.$)});"undefined"===typeof b.KDS&&(b.KDS={});m.when("A","legacy-popover").register("kindleMediaViewJS",function(k){k=k.$;b.AmznVideoPlayer&&(function(a){b.KDS.utils||(b.KDS.utils={});(b.KDS.utils.Console=function(){var c=a('<div class="kds-console-root"  />');this.tbody=a("<tbody />");a(document.body).append(c.append(a("<table />").append(a("<thead />").append(a("<tr />").append(a('<th width="30%">Time</th>'),
a('<th width="70%">Value</th>'))),this.tbody)))}).prototype.log=function(){var c=Array.prototype.slice.call(arguments);this.tbody.append(a("<tr>").append(a("<td>"+(new Date).getMilliseconds()+"</td>"),a("<td>"+c.join(" ")+"</td>")))}}(k),function(a){function c(a){function c(){}c.prototype=a;return new c}function d(c){a.isArray(c)?a.each(c,function(a,c){arguments.callee(null,c)}):(new Image).src=c}function e(a,c,d,e){var f=b.AmznVideoPlayer.players,g=f[a.mediaObjectId]||null;delete f.undefined;b.AmznVideoPlayer.apply(this,
arguments);g?f[this.id]=g:delete f[this.id];this.preplayDivId="preplayDivIV"+this.id;this.flashDivId="flashDivIV"+this.id;this.swfObjectId="soIV"+this.id}b.KDS.common||(b.KDS.common={});var f=a.browser,g=b.KDS.common.MediaView=function(c){var d=a(document.body),e=this,f=a(b),g,h=f.width();this.isViewDisplayed=!0;this.thumbnailHash=[];this.mediaHash=[];this.currentDisplayedMediaId=0;this.stateBeforeZoom=null;this.root=a('<div class="iv-root" />');this.popoverRoot=null;this.options={defaultMediaId:0,
duration:"",mediaSet:[],minPopoverWidth:500,minHeight:300,onClose:null,popover:{localContent:this.root,width:h-42,paddingLeft:13,paddingRight:40,paddingBottom:20,location:function(){return{left:21,top:20+f.scrollTop()}},modal:!0,closeText:"Close"},thumbnailIndexOrder:[],triggerElement:null,triggerRegionElement:".productImageGrid",getTriggerElementIndex:function(a,c){return 0},titleImage:"",resizeWhenWindowResizes:!0};a.extend(!0,this.options,c||{});c=this.options;c.popover.onShow=function(a){var c,
d;d=b.AmznVideoPlayer.players;for(c in d)d[c].pause();e.popoverRoot=a;e.onPopoverShow()};c.popover.onHide=function(){var a=c.onClose;e.onPopoverHide();a&&a.call(e,e)};if(c.triggerElement)g=a(c.triggerElement),g.amazonPopoverTrigger(c.popover),a(c.triggerRegionElement).mousedown(function(a){a=a.target;var b=c.getTriggerElementIndex,d;if(d=b){d=0;for(var f=!1,h=g.length;d<h;d++)if(g[d]===a){f=!0;break}d=f}d&&(e.defaultMediaId=b.apply(e,[a,e])||0)});else throw Error("triggerElement is required for Immersive View.");
c.resizeWhenWindowResizes&&f.resize(function(){e.onWindowResize()});this.build();d.append(this.root)};g.prototype.resize=function(){var c=this.mediaHash[this.currentDisplayedMediaId],d=this.popoverRoot,e=this.mediaContainer,g=this.thumbnailContainer,h=this.container,l=this.options,k=a(b);this.root.height(Math.max(l.minHeight,k.height()-100));d&&d.width(Math.max(l.minPopoverWidth,k.width()-42));f.msie&&(e.width(h.width()-g.width()-30),g.height(h.height()-this.titleContainer.height()));c&&c.resize()};
g.prototype.build=function(){var c=this.options,b=this,d=c.thumbnailIndexOrder;this.titleContainer=a('<div class="iv-title-container ap_custom_close" />').css("background-image","url("+c.titleImage+")");this.thumbnailContainer=a('<div class="iv-thumbnail-container" />');this.thumbnailInnerContainer=a('<div class="iv-thumbnail-inner-container" />');this.mediaContainer=a('<div class="iv-media-container" />');this.container=a('<div class="iv-container" />');this.root.append(this.container.append(this.mediaContainer,
this.titleContainer,this.thumbnailContainer.append(this.thumbnailInnerContainer)));0<d.length&&(c.mediaSet=a.map(d,function(a){a=c.mediaSet[a];if(!a)throw Error("thumbnailIndex is out of range.");return a}));this.addMediaThumbnail(c.mediaSet);this.thumbnailInnerContainer.click(function(){b.onThumbnailClick.apply(b,arguments)});this.mediaContainer.click(function(a){var c=b.mediaHash[b.currentDisplayedMediaId];c&&c instanceof p&&c.zoomable&&(c.isZoomedIn()?c.zoomOut():c.zoomIn(a.pageX,a.pageY))})};
g.prototype.showDefaultMedia=function(){var a=this.defaultMediaId;(a=this.getThumbnailById(a))?(a=a.getId(),this.defaultMediaId=0):a=0;this.showMedia(a)};g.prototype.onThumbnailClick=function(c){var b=a(c.target);c=this.currentDisplayedMediaId;b.hasClass("iv-thumbnail-image")&&(b=b.parent(),id=b.attr("id"),id!==c&&(this.pauseCurrentMedia(),this.showMedia(id)))};g.prototype.pauseCurrentMedia=function(){var a=this.mediaHash[this.currentDisplayedMediaId];a&&a.pause()};g.prototype.updateThumbnail=function(a){if(this.currentDisplayedMediaId!==
a){var c=this.getThumbnailById(a),b=this.getThumbnailById(this.currentDisplayedMediaId);c&&c.select();b&&b.deselect();this.currentDisplayedMediaId=a}};g.prototype.buildMedia=function(a){var c=a.id;a.container=this.mediaContainer;a=m.makeMedia(a);this.mediaHash[c]=a;this.updateThumbnail(c)};g.prototype.showMedia=function(a){this.hideAll();this.hasMedia(a)?(this.mediaHash[a].show(),this.updateThumbnail(a)):this.buildMedia(this.getThumbnailById(a).getSettings())};g.prototype.hasMedia=function(a){return!!this.mediaHash[a]};
g.prototype.hideAll=function(){a.each(this.mediaHash,function(a,c){c&&c.hide()})};g.prototype.onWindowResize=function(){var a=this;this.isViewDisplayed&&(clearTimeout(this.windowResizeTimer),this.windowResizeTimer=setTimeout(function(){a.resize()},250))};g.prototype.onPopoverShow=function(){this.isViewDisplayed=!0;this.resize();this.showDefaultMedia()};g.prototype.onPopoverHide=function(){this.isViewDisplayed=!1;this.pauseCurrentMedia()};g.prototype.addMediaThumbnail=function(c,b){var d=this,e;if(a.isArray(c))a.each(c,
function(a,c){d.addMediaThumbnail(c,a)});else if(c.id=b||0,e=m.makeThumbnail(c))this.thumbnailInnerContainer.append(e.getRoot()),this.thumbnailHash[e.getId()]=e};g.prototype.getThumbnailById=function(a){return this.thumbnailHash[a]};var l=g.Thumbnail=function(c){var b,d=c.thumbnailImageUrls;if(!d||!d["default"])throw Error("thumbnailImage is required for mediaThumbnail.");this.options={caption:"",type:"",thumbnailImageUrls:{"default":"",selected:""},imageUrls:{L:"",S:"",rich:{src:"",width:null,height:null}},
mediaObjectId:null,mediaMediaObjectId:null,id:0};a.extend(!0,this.options,c||{});c=this.options;this.id=c.id;b=this.root=a('<div class="iv-thumbnail" />');b.attr("id",this.id);this.thumbnailContainer=a('<div class="iv-thumbnail-image" />');this.defaultThumbImageUrl=d["default"];this.selectedThumbImageUrl=d.selected;b.append(this.thumbnailContainer.css("background-image","url("+this.defaultThumbImageUrl+")"));c.caption&&(this.captionContainer=a('<div class="iv-thumbnail-caption">'+c.caption+"</div>"),
b.append(this.captionContainer))};l.prototype.getRoot=function(){return this.root};l.prototype.getId=function(){return this.id};l.prototype.getSettings=function(){return this.options};l.prototype.select=function(){this.root.addClass("iv-thumbnail-selected")};l.prototype.deselect=function(){this.root.removeClass("iv-thumbnail-selected")};var h=g.VideoThumbnail=function(a){l.call(this,a);a=this.options;if(!a.mediaObjectId)throw Error("mediaObjectId is required for VideoThumbnail.");};h.prototype=c(l.prototype);
h.prototype.constructor=h;h.prototype.select=function(){var a=this.selectedThumbImageUrl;l.prototype.select.call(this);a&&this.thumbnailContainer.css("background-image","url("+a+")")};h.prototype.deselect=function(){l.prototype.deselect.call(this);this.selectedThumbImageUrl&&this.thumbnailContainer.css("background-image","url("+this.defaultThumbImageUrl+")")};var k=g.ImageThumbnail=function(a){l.call(this,a);if(!this.options.imageUrls.rich)throw Error("imageUrls.rich is required for image.");};k.prototype=
c(l.prototype);k.prototype.constructor=k;var n=g.Media=function(a){a&&(this.type=a.type,this.id=a.id,this.mediaHolder=null,this.settings=a,this.container=a.container,this.build())};n.prototype.build=function(){this.holderId="iv-media-holder-"+this.id;this.mediaHolder=a("<div id="+this.holderId+" />");this.container.append(this.mediaHolder)};n.prototype.show=function(){this.mediaHolder.show();this.resize()};n.prototype.getMediaHolder=function(){return this.mediaHolder};n.prototype.resize=function(){};
n.prototype.getSettings=function(){return this.settings};n.prototype.hide=function(){this.mediaHolder.css("display","none")};n.prototype.pause=function(){};var r=g.Video=function(){if("undefined"===typeof b.AmznVideoPlayer)throw Error("AmznVideoPlayer is required for immersive view.");this.player=null;n.apply(this,arguments)};r.prototype=c(n.prototype);r.prototype.constructor=r;r.prototype.build=function(){var a=this.container,c=a.height(),a=a.width(),b=this.settings;n.prototype.build.apply(this,
arguments);this.player=new e({mediaObjectId:b.richMediaObjectId||b.mediaObjectId,slateImageUrl:this.thumbnailImage},this.holderId,a,c);this.player.showFlash();this.mediaHolder.addClass("iv-video-holder")};r.prototype.show=function(){this.player.showFlash();n.prototype.show.apply(this)};r.prototype.resize=function(){var a=this.mediaHolder;this.player.resizeVideo(a.width(),a.height())};r.prototype.pause=function(){try{this.player.pause()}catch(a){}};r.prototype.hide=function(){var a=this.player;a.hidePreplay();
a.hideFlash();n.prototype.hide.call(this)};var p=g.Image=function(a){var c=arguments,b=a.imageUrls.rich;if(!b)throw Error("Image src is required for an image media.");this.image=null;this.zoomable=!1;b.height&&b.width&&(this.originalSize={height:b.height,width:b.width});n.apply(this,c)};p.prototype=c(n.prototype);p.prototype.constructor=p;p.prototype.build=function(){n.prototype.build.apply(this,arguments);this.image=a("<img />").attr("src",this.settings.imageUrls.rich.src);this.mediaHolder.hide().addClass("iv-image-holder").append(this.image);
this.show()};p.prototype.show=function(){this.resize();this.mediaHolder.fadeIn("slow")};p.prototype.resize=function(){function a(c,f){var g=c/b,l=f/d,q;q="auto";var k=!0;1<g&&1<l?(q=Math.max(g,l),l=Math.floor(c/q),g=Math.floor(f/q),q=Math.floor((d-g)/2)):1<g?(l=b,g=Math.floor(f/g),q=Math.floor((f-g)/2)):1<l?(g=d,l=Math.floor(c/l)):(l=g="auto",q=Math.floor((d-f)/2),k=!1);h.disableZoom();e.css({height:g,width:l,"margin-top":q,position:"relative"});(h.zoomable=k)&&h.enableZoom()}var c=this.mediaHolder,
b=c.width(),d=c.height(),e=this.image,f=this.container,g=this.originalSize,h=this;g?a(g.width,g.height):(f.addClass("iv-img-loading"),c.css("visibility","hidden").show(),e.width("auto").height("auto"),setTimeout(function(){var b=e.width(),d=e.height();a(b,d);h.originalSize={width:b,height:d};f.removeClass("iv-img-loading");c.css("visibility","visible")},2E3))};p.prototype.updateZoomCursor=function(a){var c=this.mediaHolder;a={out:"iv-zoomable-out","in":"iv-zoomable-in"}[a];c.removeClass("iv-zoomable-in iv-zoomable-out");
a&&c.addClass(a)};p.prototype.zoomIn=function(a,c){var b=this.image,d=b.height(),e=b.width(),g=b.offset(),h=g.top,g=g.left,l=this.originalSize,k=l.width,n=l.height,p,w,l=this.mediaHolder,r=l.height(),m=l.width(),v=n/d,u,z,v=f.msie?Math.floor(v):v.toFixed(1);this.stateBeforeZoom={height:d,width:e,"margin-top":b.css("margin-top"),top:0,left:0};p=Math.floor(c-h-(c-h)*n/d);w=Math.floor(a-g-(a-g)*k/e);u=m<k;z=r<n;b.css({height:"auto",width:"auto","margin-top":0});u&&b.css("left",w);z&&b.css("top",p);this.image.bind("mousemove",
function(d){var e=(a-d.pageX)*v+w;d=(c-d.pageY)*v+p;u&&e>=m-k&&0>e&&b.css("left",Math.floor(e));z&&d>=r-n&&0>d&&b.css("top",Math.floor(d))});this.updateZoomCursor("out")};p.prototype.zoomOut=function(){this.image.css(this.stateBeforeZoom).unbind("mousemove");this.stateBeforeZoom=null;this.updateZoomCursor("in")};p.prototype.disableZoom=function(){this.image.unbind("mousemove").css({top:0,left:0});this.stateBeforeZoom=null;this.updateZoomCursor("default")};p.prototype.enableZoom=function(){this.updateZoomCursor("in")};
p.prototype.isZoomedIn=function(){return!!this.stateBeforeZoom};p.prototype.hide=function(){n.prototype.hide.call(this);this.disableZoom()};var m=g.Factory=function(){return{makeMedia:function(a){switch(a.type){case "image":a=new p(a);break;case "video":a=new r(a);break;default:throw Error("Only image and video types are supported.");}return a},makeThumbnail:function(a){var c;switch(a.type){case "image":c=new k(a);d(a.imageUrls.rich.src);break;case "video":c=new h(a);break;default:throw Error("Only image and video thumbnails are supported");
}return c}}}();e.prototype=c(b.AmznVideoPlayer.prototype);e.prototype.constructor=e;e.prototype.getSO=function(){return a("#"+this.swfObjectId).get(0)};e.prototype.preparePlaceholder=function(){var c,b;a("#"+this.flashDivId).length&&a("#"+this.preplayDivId)||(c=a('<div id="'+this.preplayDivId+'" />').css({position:"relative"}),b=a('<div id="'+this.flashDivId+'"><div id="'+this.swfObjectId+'"/></div>').css({overflow:"hidden",background:"#000000"}),c=a("<div/>").css({overflow:"hidden",position:"relative",
"float":"left"}).append(c).append(b),a("#"+this.targetId).html(c))};e.prototype.writeFlashHtml=function(){var c,d,e=this;this.swfLoaded||this.swfLoading||(this.swfLoading=1,c={allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent",quality:"high"},d=new RegExp("^https?:"+String.fromCharCode(92)+"/"+String.fromCharCode(92)+"/"),d={xmlUrl:b.AmznVideoPlayer.root+"/gp/mpd/getplaylist-v2/"+this.id+"/"+AmznVideoPlayer.session,mediaObjectId:this.id,locale:b.AmznVideoPlayer.locale,sessionId:b.AmznVideoPlayer.session,
amazonServer:b.AmznVideoPlayer.root.replace(d,""),swfEmbedTime:(new Date).getTime(),allowFullScreen:"true",amazonPort:"80",preset:"detail",autoPlay:"1",permUrl:"gp/mpd/permalink",scale:"noscale"},swfobject.embedSWF(b.AmznVideoPlayer.swf,this.swfObjectId,"100%","100%",b.AmznVideoPlayer.flashVersion,!1,d,c,c,function(c){e.swfLoading=0;c.success?(b.AmznVideoPlayer.lastPlayedId=e.id,e.swfLoaded=1):a("#"+e.flashDivId).html("<br/><br/><br/><br/><br/><br/><br/>"+b.AmznVideoPlayer.noFlashMsg).css({background:"#ffffff"})}))}}(k))});
m.when("A","legacy-popover").register("kindleQuantityRestrictionJS",function(k){var a=k.$,c;b.KDS||(b.KDS={});b.KDS=b.KDS;b.KDS.widget||(c=b.KDS.widget={});c.QuantityRestriction={settings:{maxQuantity:null,currentASIN:null,bulkASINs:{},popover:{title:"",content:""}},existingDropDown:a("#quantity"),lastOption:null,init:function(c){var e=this,f;a.extend(!0,this.settings,c);c=e.settings;if(null===c.maxQuantity||!c.currentASIN||!c.popover.title||!c.popover.content)throw Error("maxQuantity, popover title and popover content need to be specified.");
b.DetailPageFramework&&(f=b.DetailPageFramework.BuyBoxAdapter.prototype.updateDropdown,b.DetailPageFramework.BuyBoxAdapter.prototype.updateDropdown=function(a){f.apply(this,arguments);c.maxQuantity=a;c.currentASIN=DetailPage.StateController.getState().current_asin;e.updateDropdown()});this.updateDropdown()},updateDropdown:function(){var c=this.settings,b=c.maxQuantity,f=b+1+"+";c.bulkASINs[c.currentASIN]&&(this.lastOption&&this.lastOption.remove(),this.lastOption=a('<option value="'+f+'">'+f+"</option>"),
this.existingDropDown.append(this.lastOption).change(function(){var g=c.popover,l=a(this);l.val()===f&&(a.AmazonPopover.displayPopover({hoverShowDelay:200,hoverHideDelay:200,width:502,showCloseButton:!0,literalContent:g.content.replace("MAX_QUANTITY_PLUS_ONE",b+1),title:g.title,skin:"default",locationElement:"#quantity",location:"left",closeEventExclude:"CLICK_TRIGGER"}),l.val(1))}))}}});b.KDS||(b.KDS={common:{}});b.KDS.common||(b.KDS.common={});m.when("A").register("kindleShowMeJS",function(k){k=
k.$;b.AmznVideoPlayer&&(b.KDS.common.ShowMe=function(a){function c(){h.pauseInterval&&clearInterval(h.pauseInterval);h.pollCounter=0;var c=a(this);c.length||(c=a("#ksm-thumb-container-0"));thisIndex=c.attr("id").substring(20);a(".ksm-video-container-current").removeClass("ksm-video-container-current");a(".ksm-thumb-container-current").removeClass("ksm-thumb-container-current");a(".ksm-learnmore-links-current").removeClass("ksm-learnmore-links-current");a("#ksm-video-container-"+thisIndex).addClass("ksm-video-container-current");
a("#ksm-thumb-container-"+thisIndex).addClass("ksm-thumb-container-current");a("#ksm-learnmore-links-"+thisIndex).addClass("ksm-learnmore-links-current");l(a(c),!0);if(h.options.useFlash)g(thisIndex),h.pauseInterval=setInterval(function(){if(h.pollCounter<4*h.pollTTL){h.pollCounter++;for(var a in h.flashPlayers)if(a!=thisIndex)try{h.flashPlayers[a].pause()&&h.flashPlayers[a].pause()}catch(c){}}else clearInterval(h.pauseInterval)},250);else for(var c=a(".ksm-video-html5-container video").get(),d=0;d<
c.length;d++)c[d].pause();b.KDS&&b.KDS.ajax&&b.KDS.ajax.RefTag&&(c=h.options.ksmJson[thisIndex].reftag)&&b.KDS.ajax.RefTag.send(c)}function d(){var c=!0;a(this).length&&(c="ksm-left-arrow"==a(this).attr("id"));var b=parseInt(a(".ksm-thumb-page-current").attr("id").substring(15)),d=0,d=c?b-1:b+1;a("#ksm-thumb-page-"+d).length&&(a(".ksm-thumb-page-current").removeClass("ksm-thumb-page-current"),a("#ksm-thumb-page-"+d).addClass("ksm-thumb-page-current"));a("#ksm-thumb-page-"+(d-1)).length?(a("#ksm-left-arrow-disabled").css("visibility",
"hidden"),a("#ksm-left-arrow").css("visibility","visible")):a("#ksm-left-arrow").css("visibility","hidden");a("#ksm-thumb-page-"+(d+1)).length&&-1<d?(a("#ksm-right-arrow-disabled").css("visibility","hidden"),a("#ksm-right-arrow").css("visibility","visible")):a("#ksm-right-arrow").css("visibility","hidden");a(".ksm-thumb-page-current").find(".ksm-thumb-container-current").length?a("#ksm-carat").css("visibility","visible"):a("#ksm-carat").css("visibility","hidden");c="Page "+(1+d)+" of "+h.options.pages;
a("#ksm-page-numbers").html(c)}function e(a){a=h.options.ksmJson[a];return{mediaObjectId:a.mediaObjectId,slateImageUrl:a.preplayImageUrl}}function f(a){var c="ksm-video-flash-container-"+a;a=b.AmznVideoPlayer.players[h.options.ksmJson[a].mediaObjectId]=new b.AmznVideoPlayer(e(a),c,h.options.ksmConfig.videoWidth,h.options.ksmConfig.videoHeight);a.hideFlash();a.showPreplay();return a}function g(a){var c=h.flashPlayers[a],b=h.options.ksmConfig.videoWidth,d=h.options.ksmConfig.videoHeight,g=h.options.ksmConfig.mediaMarginBottom;
c||(h.flashPlayers[a]=f(a),c=h.flashPlayers[a]);c.changeSlateImage(e(a).slateImageUrl,b,d,d-g)}function l(c,b){var d=c.find("img.ksm-thumb:first"),d=d.position().left-10+a(d).width()/2,e=a("#ksm-carat");e.css("visibility","visible");e.show();e.is(":visible")||b?e.animate({left:d}):e.css({left:d})}var h={options:{},flashPlayers:[],pauseInterval:null,pollTTL:10,pollCounter:0},k;a(b).resize(function(){a("#ksm-carat").hide();clearTimeout(k);k=setTimeout(function(){l(a(".ksm-thumb-container-current"),
!1)},200)});return{init:function(e){h.options=e;e.pages=Math.ceil(e.ksmJson.length/e.ksmConfig.videosPerPage);1==e.pages&&a("#ksm-page-numbers").hide();if(0==e.ksmConfig.useHTML5Video)e.useFlash=!0;else if(1==e.ksmConfig.useHTML5Video)e.useFlash=!1;else{var g=document.createElement("video");e.useFlash=!g.play||"1"==e.ksmConfig.alwaysUseFlash}e.useFlash?(a(".ksm-video-flash-container").show(),h.flashPlayers=[],b.AmznVideoPlayer.prototype.changeSlateImage=function(a,c,b,d){delete this.preplayobject;
this.slateImageUrl=a;this.preplayWidth=c;this.preplayHeight=b;this.writePreplayHtml()},b.AmznVideoPlayer.prototype.getLoadingStatus=function(){return"loading: "+this.swfLoading+" loaded: "+this.swfLoaded},b.AmznVideoPlayer.preplayTemplate=e.ksmConfig.preplayTemplate,h.flashPlayers[0]=f(0)):a(".ksm-video-html5-container").show();a(".ksm-thumb-container").mouseup(c);a(".ksm-arrow").mouseup(d);a("#ksm-thumb-container-0").trigger("mouseup");a("#ksm-page-numbers").css("width",a("#ksm-headline-img").width()).html("Page 1 of "+
e.pages)}}}(k))})});