(function(n,p,y){n.execute(function(){n.when("A","page-refresh-state","web-ajax-utility","alt-page-refresh-measurement").register("page-refresh-handler",function(f,k,h,g){var e={},c=f.$,m=y,b=function(a,b){var d=this;d.clientId=a;d.persistentParams={};d.pageRefreshUrlParams="";d.deviceType="";d.doPageRefresh=function(e,g,m,k){d.persistentParams=c.extend(!0,d.persistentParams,g.Persistent);var n={};c.extend(!0,n,d.persistentParams,g["Non-Persistent"]);g=b;var p=0<=f.contains(g,"?");g=g+(p?"&":"?")+
((e?"asin="+e:"")+(d.pageRefreshUrlParams?d.pageRefreshUrlParams:""));for(var v in n)null!=n[v]&&(e=n[v],p=g.slice(-1),g+="?"===p||"&"===p?"":"&",g+=v+"="+e);h.getInstance(a,g,m,k).getContent()};d.addParams=function(a){d.persistentParams=c.extend(!0,d.persistentParams,a);return!0};d.removeParams=function(a){f.each(a,function(a,b){delete d.persistentParams[a]});return!0};d.createCustomParamsMap=function(a,b){var d={Persistent:{},"Non-Persistent":{}};c.each(a,function(a,b){d.Persistent[a]=b});c.each(b,
function(a,b){d["Non-Persistent"][a]=b});return d};d.startMeasurement=function(a,b,c,d){m&&m.start(a,b,c,d)};d.stampImageLoad=function(a){m&&m.stampImageLoad(a)};d.stampFeature=function(a,b){m&&m.stampFeature(a,b)};(function(){var a=k.pageRefreshData;d.pageRefreshUrlParams=a.pageRefreshUrlParams;d.deviceType=a.deviceType})()};return{getHandlerInstance:function(a,f,d){(null==a||""===a)&&p.ueLogError&&p.ueLogError({message:"Invalid ClientId"},{logLevel:"FATAL",attribution:"PageRefreshAPI",message:"Invalid ClientId passed to getHandlerInstance of dpRefreshHandler"});
e[a]||(e[a]=new b(a,f));m||(f=d.config,m=new g(c,f.atf.marker,f.cf.marker),m.init(d.storeID,d.productGroupID));return e[a]}}});n.when("A","page-refresh-handler").register("dp-refresh-handler",function(f,k){function h(g,e,c){this.featureTriggeringRefresh=g.featureName;this.deviceType=(this.deviceTypeStateData=f.state("detail-page-device-type"))&&this.deviceTypeStateData.deviceType?this.deviceTypeStateData.deviceType:"web";this.pageRefreshUrl=e&&e.pageRefreshUrl?e.pageRefreshUrl:"/gp/twister/ajaxv2";
this.clientId="PageRefresh_"+this.deviceType+"_Client";this.DPRefreshHandler=k.getHandlerInstance(this.clientId,this.pageRefreshUrl,c)}h.prototype={doPageRefresh:function(f,e,c,m){try{this.DPRefreshHandler.doPageRefresh(f,e,c,m)}catch(b){p.ueLogError&&p.ueLogError(b,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the doPageRefresh method triggered by - "+this.featureTriggeringRefresh})}},createCustomParamsMap:function(f,e){var c={};try{c=this.DPRefreshHandler.createCustomParamsMap(f,
e)}catch(m){p.ueLogError&&p.ueLogError(m,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the createCustomParamsMap method triggered by - "+this.featureTriggeringRefresh})}return c},addParams:function(f){return f&&"object"==typeof f?this.DPRefreshHandler.addParams(f):!1},removeParams:function(f){return f&&"object"==typeof f?this.DPRefreshHandler.removeParams(f):!1},startMeasurement:function(f,e,c,m){try{this.DPRefreshHandler.startMeasurement(f,e,c,m)}catch(b){p.ueLogError&&
p.ueLogError(b,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the startMeasurement method triggered by - "+this.featureTriggeringRefresh})}},stampImageLoad:function(f){try{this.DPRefreshHandler.stampImageLoad(f)}catch(e){p.ueLogError&&p.ueLogError(e,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the startMeasurement method triggered by - "+this.featureTriggeringRefresh})}},stampFeature:function(f,e){try{this.DPRefreshHandler.stampFeature(f,
e)}catch(c){p.ueLogError&&p.ueLogError(c,{logLevel:"ERROR",attribution:this.featureTriggeringRefresh,message:"This error is caused by the startMeasurement method triggered by - "+this.featureTriggeringRefresh})}}};return h});n.when("A","jQuery").register("alt-page-refresh-ajax-scope",function(f,k){return function(f,g,e){this.scopeName=g;this.url=e;ues("t0",g,p.newTwisterInteractionStartTime);ues("ctb",g,"1");this.signalMarker=function(c){!this.markers[c]||0>=this.markers[c].conditions||0===--this.markers[c].conditions&&
"function"==typeof this.markers[c].handler&&this.markers[c].handler()};this.addlongPoleTag=function(c,b){c=c.toLowerCase();this.markers[c]&&0==this.markers[c].conditions&&0==this.markers[c].conditions&&p.ue&&"function"===typeof ue.tag&&ue.tag(b)};this.postData=function(){var c=this.scopeName;f.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(b,a,e){ues("id",c,b);uex("ld",c)}})};var c=this;this.markers={image:{conditions:1,handler:function(){uet("ne",g);c.signalMarker("af")}},
af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",g);uet("cf",g);c.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",g);c.postData()}}}}});n.when("A","jQuery","alt-page-refresh-ajax-scope").register("alt-page-refresh-measurement",function(f,k,h){return function(f,e,c){this.atfMarker=e;this.cfMarker=c;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(c,b){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+
c+"&pgid="+b+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=function(c,b,a,e){if(p.ue){this.scopeCount[c]||(this.scopeCount[c]=0);var d=c+(this.scopeCount[c]+1);this.scopeCount[c]++;var k=this.url;b&&(k+="&dimensionType="+b);"undefined"!==typeof a&&(k+="&dimensionCount="+a);"undefined"!==typeof e&&(k+="&dimensionsDisplayType="+e);this.ajaxScopes[c]=new h(f,d,k)}};this.stampImageLoad=function(c){this.ajaxScopes[c]&&(this.ajaxScopes[c].signalMarker("image"),
Twister.cfImageLongPollTag&&this.ajaxScopes[c].addlongPoleTag("cf",Twister.cfImageLongPollTag))};this.stampFeature=function(c,b){this.ajaxScopes[b]&&(c===this.atfMarker&&this.ajaxScopes[b].signalMarker("af"),c===this.cfMarker&&(this.ajaxScopes[b].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[b].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(c,b){this.ajaxScopes[b]&&uet(c,this.ajaxScopes[b].scopeName)}}});n.when("A","ready").register("page-refresh-state",
function(f){var k=f.state("page-refresh-data");f=f.state("detail-page-device-type");var h={};"undefined"!==typeof k&&(h.pageRefreshUrlParams=k.pageRefreshUrlParams);"undefined"!==typeof f&&(h.deviceType=f.deviceType);return{pageRefreshData:h}});n.when("A","jQuery","dp-js-logger").register("web-ajax-utility",function(f,k,h){function g(c,e,b,a){this.scope=c;this.url=e;this.options=b;this.status=0;this.selected=!1;this.error=this.successData=this.xhr=this._status=y;this.chunks=[];this.doNotAbort=a||
!1}var e=new h("WebAjaxUtility");g._objects={};g.prototype._callback=function(){var c=arguments[0],e=Array.prototype.slice.call(arguments,1);"function"===typeof c&&c.apply(self,e)};g.prototype._canAbort=function(){return!this.doNotAbort&&1===this.status};g.prototype._isAborted=function(){return 3===this.status};g.prototype._getUrl=function(){return this.url};g.prototype._abort=function(){if(1===this.status)try{this.ajaxRequestRefence.abort(),this.status=3}catch(c){e.logFatal(c,{message:" Could not abort ajax request."})}};
g.prototype._flushChunkData=function(){var c=this;c.chunks.length&&k.map(c.chunks,function(e){c._callback(c.options.chunk,e)})};g.prototype._request=function(){var c=this;c.ajaxRequestRefence=f.get(c.url,{params:c.options.params,success:function(e,b,a){c.status=4;c.successData=e;c._status=b;c.xhr=a;c.selected&&c._callback(c.options.success,e,b,a)},error:function(e,b,a){c.status=2;c.xhr=e;c._status=b;c.error=a;c.selected&&c._callback(c.options.error,e,b,a)},abort:function(e){c.status=3;c.xhr=e;c.selected&&
c._callback(c.options.abort,e)},chunk:function(e){e&&(c.chunks.push(e),c.selected&&c._callback(c.options.chunk,e))},timeout:c.options.timeout||4E4})};g.prototype.getContent=function(){g._abortRequestsExcept(this);this.selected=!0;0===this.status?(this.status=1,this._request()):1===this.status?this._flushChunkData():4===this.status&&(this._flushChunkData(),this._callback(this.options.success,this.successData,this._status,this.xhr),f.trigger("a:pageUpdate"))};g._abortRequestsExcept=function(c){k.each(g._objects[c.scope],
function(e,b){b._canAbort()&&e!==c._getUrl()&&b._abort()})};g.getInstance=function(c,e,b,a){if(!c||!e||"object"!==typeof b)throw"Incorrect parameter passed.";g._objects[c]=g._objects[c]||{};var f=g._objects[c][e];f&&f._isAborted()&&(delete g._objects[c][e],f=y);f||(g._objects[c][e]=new g(c,e,b,a,this));return g._objects[c][e]};return g})})})(function(){var n=window.AmazonUIPageJS||window.P,p=n._namespace||n.attributeErrors;return p?p("PageRefreshAsset"):n}(),window);